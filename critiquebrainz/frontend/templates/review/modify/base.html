{% extends 'base.html' %}

{% block content %}
  {% block header %}{% endblock %}
  <hr />

  {% for field in form.errors %}
    {% for error in form.errors[field] %}
      <div class="alert alert-danger">{{ error }}</div>
    {% endfor %}
  {% endfor %}

  <div class="row">
    {% include ('review/modify/%s.html' % entity_type) %}
  </div>

  <div class="clearfix">
    <ul class="nav nav-tabs" style="margin-bottom:-1px;">
      <li class="active"><a href="#write" data-toggle="tab">{{ _('Write') }}</a></li>
      <li><a href="#preview" data-toggle="tab">{{ _('Preview') }}</a></li>
      <small class="text-muted pull-right" style="margin-top:20px;font-style:italic;">
        {{ _('You can use <a href="%(url)s" target="_blank">Markdown</a> syntax to apply custom formatting.',
              url='http://daringfireball.net/projects/markdown/syntax') }}
      </small>
    </ul>
  </div>
  <form id="review-editor" method="POST" class="form-horizontal" role="form">
    {{ form.hidden_tag() }}
    <div class="form-group">
      <div class="col-sm-12 tab-content">
        <div class="tab-pane fade in active" id="write">
          {{ form.text(id="review-content", class="form-control", rows="5") }}
        </div>
        <div class="tab-pane fade" id="preview" style="margin-top:20px;">
          <span class="text-muted">{{ _('Loading preview...') }}</span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-4" for="review-language">{{ _('Please, specify language of this review:') }}</label>
      <div class="col-sm-8">{{ form.language(id="review-language", class="form-control") }}</div>
    </div>
    <hr />
    {% if not review or review.is_draft %}
      <div class="form-group">
        <div class="col-sm-12">
          {% for choice in form.license_choice %}
            <div class="radio">
              <label>{{ choice }}{{ choice.label.text | safe }}</label>
            </div>
          {% endfor %}
          <br /><small class="text-warning"><em>{{ _('You cannot change the license after the review is published.') }}</em></small>
        </div>
      </div>
    {% endif %}
    {% block license_agreement_input %} {% endblock %}
  </form>
  {% block buttons %} {% endblock %}
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ 'reviewBase.js'|make_static_path }}"></script>
{% endblock %}
